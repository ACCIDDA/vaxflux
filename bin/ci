#!/usr/bin/env bash

PYTHON_VERSION=$( python --version | cut -d ' ' -f 2 | cut -d '.' -f1-2 )
TARGET_VERSION=$( echo "py$PYTHON_VERSION" | tr -d '.' )
echo "Using python version $PYTHON_VERSION"

echo "> Formatting with ruff..."
ruff format --target-version $TARGET_VERSION

echo "> Linting with ruff..."
ruff check --fix --target-version $TARGET_VERSION

echo "> Type checking with mypy..."
mypy --python-version $PYTHON_VERSION .

echo "> Running tests with pytest..."
pytest
